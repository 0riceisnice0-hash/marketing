---
import { FAQ_ITEMS } from '../config/site';
---

<section class="py-20 bg-bg-base">
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-16">
      <h2 class="text-3xl md:text-4xl font-bold font-heading text-text-primary mb-4">
        Frequently asked questions
      </h2>
    </div>
    
    <div class="space-y-4">
      {FAQ_ITEMS.map((item, index) => (
        <div class="glass rounded-xl overflow-hidden hover:border-accent-primary/30 transition-all">
          <button
            type="button"
            class="faq-button w-full px-6 py-4 text-left flex justify-between items-center hover:bg-bg-elevated focus:outline-none focus:ring-2 focus:ring-inset focus:ring-accent-primary transition-colors"
            aria-expanded="false"
            data-index={index}
          >
            <span class="font-semibold font-heading text-text-primary">{item.question}</span>
            <svg
              class="faq-icon accordion-icon w-5 h-5 text-text-tertiary flex-shrink-0 ml-4"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </button>
          <div class="faq-content accordion-content px-6">
            <p class="text-text-secondary leading-relaxed pb-4">{item.answer}</p>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<script>
  // FAQ accordion functionality with springy animation
  document.querySelectorAll('.faq-button').forEach((button) => {
    button.addEventListener('click', () => {
      const content = button.nextElementSibling as HTMLElement;
      const icon = button.querySelector('.faq-icon');
      const isExpanded = button.getAttribute('aria-expanded') === 'true';
      
      // Close all other FAQs
      document.querySelectorAll('.faq-button').forEach((otherButton) => {
        if (otherButton !== button) {
          otherButton.setAttribute('aria-expanded', 'false');
          const otherContent = otherButton.nextElementSibling as HTMLElement;
          otherContent?.classList.remove('open');
          otherButton.querySelector('.faq-icon')?.classList.remove('rotated');
        }
      });
      
      // Toggle current FAQ
      button.setAttribute('aria-expanded', String(!isExpanded));
      content?.classList.toggle('open');
      icon?.classList.toggle('rotated');
    });
  });
</script>

<style>
  @media (prefers-reduced-motion: reduce) {
    .faq-icon,
    .faq-content {
      transition: none !important;
    }
  }
</style>
